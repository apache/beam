<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>apache_beam.typehints.typehints_test &#8212; Apache Beam  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Apache Beam  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for apache_beam.typehints.typehints_test</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># Licensed to the Apache Software Foundation (ASF) under one or more</span>
<span class="c1"># contributor license agreements.  See the NOTICE file distributed with</span>
<span class="c1"># this work for additional information regarding copyright ownership.</span>
<span class="c1"># The ASF licenses this file to You under the Apache License, Version 2.0</span>
<span class="c1"># (the &quot;License&quot;); you may not use this file except in compliance with</span>
<span class="c1"># the License.  You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#    http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot;Unit tests for the type-hint objects and decorators.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">unittest</span>


<span class="kn">import</span> <span class="nn">apache_beam.typehints</span> <span class="k">as</span> <span class="nn">typehints</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">Any</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">is_consistent_with</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">TypeCheckError</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">with_input_types</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints</span> <span class="k">import</span> <span class="n">with_output_types</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints.decorators</span> <span class="k">import</span> <span class="n">_check_instance_type</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints.decorators</span> <span class="k">import</span> <span class="n">_interleave_type_check</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints.decorators</span> <span class="k">import</span> <span class="n">_positional_arg_hints</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints.decorators</span> <span class="k">import</span> <span class="n">get_type_hints</span>
<span class="kn">from</span> <span class="nn">apache_beam.typehints.decorators</span> <span class="k">import</span> <span class="n">getcallargs_forhints</span>


<div class="viewcode-block" id="check_or_interleave"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.check_or_interleave">[docs]</a><span class="k">def</span> <span class="nf">check_or_interleave</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">hint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">value</span>
  <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">IteratorHint</span><span class="o">.</span><span class="n">IteratorTypeConstraint</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_interleave_type_check</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">var</span><span class="p">)(</span><span class="n">value</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">_check_instance_type</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span></div>


<div class="viewcode-block" id="check_type_hints"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.check_type_hints">[docs]</a><span class="k">def</span> <span class="nf">check_type_hints</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
  <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">hints</span> <span class="o">=</span> <span class="n">get_type_hints</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">hints</span><span class="o">.</span><span class="n">input_types</span><span class="p">:</span>
      <span class="n">input_hints</span> <span class="o">=</span> <span class="n">getcallargs_forhints</span><span class="p">(</span>
          <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">hints</span><span class="o">.</span><span class="n">input_types</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">**</span><span class="n">hints</span><span class="o">.</span><span class="n">input_types</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="n">inputs</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
      <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">input_hints</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
        <span class="n">new_value</span> <span class="o">=</span> <span class="n">check_or_interleave</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">pvar</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
              <span class="k">if</span> <span class="n">pvar</span> <span class="o">==</span> <span class="n">var</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Iterable in nested argument </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">var</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">check_or_interleave</span><span class="p">(</span><span class="n">hints</span><span class="o">.</span><span class="n">simple_output_type</span><span class="p">(</span><span class="s1">&#39;typecheck&#39;</span><span class="p">),</span> <span class="n">res</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">wrapper</span></div>


<div class="viewcode-block" id="DummyTestClass1"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DummyTestClass1">[docs]</a><span class="k">class</span> <span class="nc">DummyTestClass1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">pass</span></div>


<div class="viewcode-block" id="DummyTestClass2"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DummyTestClass2">[docs]</a><span class="k">class</span> <span class="nc">DummyTestClass2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">pass</span></div>


<div class="viewcode-block" id="SuperClass"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SuperClass">[docs]</a><span class="k">class</span> <span class="nc">SuperClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">pass</span></div>


<div class="viewcode-block" id="SubClass"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SubClass">[docs]</a><span class="k">class</span> <span class="nc">SubClass</span><span class="p">(</span><span class="n">SuperClass</span><span class="p">):</span>
  <span class="k">pass</span></div>


<div class="viewcode-block" id="TypeHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TypeHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">TypeHintTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TypeHintTestCase.assertCompatible"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TypeHintTestCase.assertCompatible">[docs]</a>  <span class="k">def</span> <span class="nf">assertCompatible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">sub</span><span class="p">):</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span>
        <span class="n">is_consistent_with</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">base</span><span class="p">),</span>
        <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> is not consistent with </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span></div>

<div class="viewcode-block" id="TypeHintTestCase.assertNotCompatible"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TypeHintTestCase.assertNotCompatible">[docs]</a>  <span class="k">def</span> <span class="nf">assertNotCompatible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">sub</span><span class="p">):</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span>
        <span class="n">is_consistent_with</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">base</span><span class="p">),</span>
        <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> is consistent with </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="AnyTypeConstraintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.AnyTypeConstraintTestCase">[docs]</a><span class="k">class</span> <span class="nc">AnyTypeConstraintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="AnyTypeConstraintTestCase.test_any_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.AnyTypeConstraintTestCase.test_any_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_any_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">DummyTestClass1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">KV</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnyTypeConstraintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.AnyTypeConstraintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Any&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">))</span></div>

<div class="viewcode-block" id="AnyTypeConstraintTestCase.test_type_check"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.AnyTypeConstraintTestCase.test_type_check">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># This test passes if the type_check call does not raise any exception.</span>
    <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="o">.</span><span class="n">type_check</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">DummyTestClass1</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="UnionHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">UnionHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="UnionHintTestCase.test_getitem_must_be_valid_type_param_cant_be_object_instance"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_getitem_must_be_valid_type_param_cant_be_object_instance">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_must_be_valid_type_param_cant_be_object_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Cannot create Union without a sequence of types.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_getitem_must_be_valid_type_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_getitem_must_be_valid_type_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_must_be_valid_type_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;All parameters to a Union hint must be a non-sequence, &#39;</span>
                     <span class="s1">&#39;a type, or a TypeConstraint. 2 is an instance of int.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_getitem_duplicates_ignored"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_getitem_duplicates_ignored">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_duplicates_ignored</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Types should be de-duplicated.</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">union_types</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_getitem_nested_unions_flattened"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_getitem_nested_unions_flattened">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_nested_unions_flattened</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># The two Union&#39;s should be merged into 1.</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                           <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">union_types</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">t</span> <span class="ow">in</span> <span class="n">hint</span><span class="o">.</span><span class="n">union_types</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)))</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_union_hint_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_union_hint_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_union_hint_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span>
                             <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                             <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_nested_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_nested_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_nested_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
                          <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SuperClass</span><span class="p">],</span> <span class="n">SubClass</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">SuperClass</span><span class="p">],</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SubClass</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SubClass</span><span class="p">],</span> <span class="n">SuperClass</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">SubClass</span><span class="p">],</span>
                             <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SuperClass</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SuperClass</span><span class="p">],</span>
                             <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">SubClass</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                          <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_union_hint_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_union_hint_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_union_hint_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">hint</span><span class="p">),</span>
        <span class="c1"># Uses frozen set internally, so order not guaranteed.</span>
        <span class="p">[</span><span class="s1">&#39;Union[str, DummyTestClass1]&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Union[DummyTestClass1, str]&#39;</span><span class="p">]</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_union_hint_enforcement_composite_type_in_union"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_union_hint_enforcement_composite_type_in_union">[docs]</a>  <span class="k">def</span> <span class="nf">test_union_hint_enforcement_composite_type_in_union</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">DummyTestClass1</span><span class="p">()</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">DummyTestClass1</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">o</span><span class="p">))</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_union_hint_enforcement_part_of_union"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_union_hint_enforcement_part_of_union">[docs]</a>  <span class="k">def</span> <span class="nf">test_union_hint_enforcement_part_of_union</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="UnionHintTestCase.test_union_hint_enforcement_not_part_of_union"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.UnionHintTestCase.test_union_hint_enforcement_not_part_of_union">[docs]</a>  <span class="k">def</span> <span class="nf">test_union_hint_enforcement_not_part_of_union</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Union[float, int] type-constraint violated. Expected an &quot;</span>
                     <span class="s2">&quot;instance of one of: (&#39;float&#39;, &#39;int&#39;), received str &quot;</span>
                     <span class="s2">&quot;instead.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OptionalHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.OptionalHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">OptionalHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="OptionalHintTestCase.test_getitem_sequence_not_allowed"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.OptionalHintTestCase.test_getitem_sequence_not_allowed">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_sequence_not_allowed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
        <span class="s1">&#39;An Option type-hint only accepts a single type parameter.&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="OptionalHintTestCase.test_getitem_proxy_to_union"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.OptionalHintTestCase.test_getitem_proxy_to_union">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_proxy_to_union</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">UnionHint</span><span class="o">.</span><span class="n">UnionConstraint</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="TupleHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">TupleHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TupleHintTestCase.test_getitem_invalid_ellipsis_type_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_getitem_invalid_ellipsis_type_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_invalid_ellipsis_type_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">error_msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Ellipsis can only be used to type-hint an arbitrary length &#39;</span>
                 <span class="s1">&#39;tuple of containing a single type: Tuple[A, ...].&#39;</span><span class="p">)</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">error_msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">error_msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_getitem_params_must_be_type_or_constraint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_getitem_params_must_be_type_or_constraint">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_params_must_be_type_or_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">expected_error_prefix</span> <span class="o">=</span> <span class="s1">&#39;All parameters to a Tuple hint must be&#39;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">expected_error_prefix</span><span class="p">))</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">expected_error_prefix</span><span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_compatibility_arbitrary_length"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_compatibility_arbitrary_length">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility_arbitrary_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SuperClass</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SubClass</span><span class="p">,</span> <span class="n">SuperClass</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">SuperClass</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SubClass</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SuperClass</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SubClass</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
                             <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_raw_tuple"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_raw_tuple">[docs]</a>  <span class="k">def</span> <span class="nf">test_raw_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[int, str, float]&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span>

    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="n">DummyTestClass2</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[DummyTestClass1, DummyTestClass2]&#39;</span><span class="p">,</span>
                     <span class="nb">str</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span>

    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[float, ...]&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_must_be_tuple"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_must_be_tuple">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_must_be_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">expected_error_prefix</span> <span class="o">=</span> <span class="s1">&#39;Tuple type constraint violated. Valid object&#39;</span>
    <span class="n">invalid_instances</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">},</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">invalid_instances</span><span class="p">:</span>
      <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">expected_error_prefix</span><span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_must_have_same_arity"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_must_have_same_arity">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_must_have_same_arity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># A 2-tuple of ints.</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Passed object instance is of the proper type, but &#39;</span>
                     <span class="s1">&#39;differs in length from the hinted type. Expected a &#39;</span>
                     <span class="s1">&#39;tuple of length 2, received a tuple of length 3.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_invalid_simple_types"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_invalid_simple_types">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_simple_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[str, bool] hint type-constraint violated. The &#39;</span>
                     <span class="s1">&#39;type of element #0 in the passed tuple is incorrect.&#39;</span>
                     <span class="s1">&#39; Expected an instance of type str, instead received &#39;</span>
                     <span class="s1">&#39;an instance of type int.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_invalid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_invalid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="n">DummyTestClass2</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">DummyTestClass2</span><span class="p">(),</span> <span class="n">DummyTestClass1</span><span class="p">())</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[DummyTestClass1, DummyTestClass2] hint &#39;</span>
                     <span class="s1">&#39;type-constraint violated. The type of element #0 in the &#39;</span>
                     <span class="s1">&#39;passed tuple is incorrect. Expected an instance of type &#39;</span>
                     <span class="s1">&#39;DummyTestClass1, instead received an instance of type &#39;</span>
                     <span class="s1">&#39;DummyTestClass2.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_valid_simple_types"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_valid_simple_types">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_simple_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">((</span><span class="mf">4.3</span><span class="p">,</span> <span class="kc">True</span><span class="p">)))</span>

    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">((</span><span class="mi">1</span><span class="p">,)))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_valid_composite_types"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_valid_composite_types">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_composite_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                           <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span>
        <span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
    <span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_valid_simple_type_arbitrary_length"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_valid_simple_type_arbitrary_length">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_simple_type_arbitrary_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_valid_composite_type_arbitrary_length"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_valid_composite_type_arbitrary_length">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_composite_type_arbitrary_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">))</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_invalid_simple_type_arbitrary_length"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_invalid_simple_type_arbitrary_length">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_simple_type_arbitrary_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>

    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Tuple[str, ...] hint type-constraint violated. The type &#39;</span>
                     <span class="s1">&#39;of element #2 in the passed tuple is incorrect. Expected &#39;</span>
                     <span class="s1">&#39;an instance of type str, instead received an instance of &#39;</span>
                     <span class="s1">&#39;type int.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TupleHintTestCase.test_type_check_invalid_composite_type_arbitrary_length"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TupleHintTestCase.test_type_check_invalid_composite_type_arbitrary_length">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_composite_type_arbitrary_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>

    <span class="n">t</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Tuple[List[int], ...] hint type-constraint violated. The &quot;</span>
                     <span class="s2">&quot;type of element #1 in the passed tuple is incorrect: &quot;</span>
                     <span class="s2">&quot;List type-constraint violated. Valid object instance &quot;</span>
                     <span class="s2">&quot;must be of type &#39;list&#39;. Instead, an instance of &#39;str&#39; &quot;</span>
                     <span class="s2">&quot;was received.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ListHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">ListHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ListHintTestCase.test_getitem_invalid_composite_type_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_getitem_invalid_composite_type_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_invalid_composite_type_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_list_constraint_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_list_constraint_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_list_constraint_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint1</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="n">hint2</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">hint1</span><span class="p">,</span> <span class="n">hint1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">hint1</span><span class="p">,</span> <span class="n">hint2</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SuperClass</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SubClass</span><span class="p">])</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_list_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_list_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_list_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">,</span> <span class="n">DummyTestClass2</span><span class="p">]]</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;List[Tuple[DummyTestClass1, DummyTestClass2]]&#39;</span><span class="p">,</span>
                     <span class="nb">repr</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_enforce_list_type_constraint_valid_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_enforce_list_type_constraint_valid_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_enforce_list_type_constraint_valid_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_enforce_list_type_constraint_valid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_enforce_list_type_constraint_valid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_enforce_list_type_constraint_valid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="n">DummyTestClass1</span><span class="p">(),</span> <span class="n">DummyTestClass1</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">))</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_enforce_list_type_constraint_invalid_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_enforce_list_type_constraint_invalid_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_enforce_list_type_constraint_invalid_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;List[int] hint type-constraint violated. The type of &#39;</span>
                     <span class="s1">&#39;element #0 in the passed list is incorrect. Expected an &#39;</span>
                     <span class="s1">&#39;instance of type int, instead received an instance of &#39;</span>
                     <span class="s1">&#39;type str.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListHintTestCase.test_enforce_list_type_constraint_invalid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ListHintTestCase.test_enforce_list_type_constraint_invalid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_enforce_list_type_constraint_invalid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;List[Tuple[int, int]] hint type-constraint violated.&#39;</span>
                     <span class="s1">&#39; The type of element #0 in the passed list is &#39;</span>
                     <span class="s1">&#39;incorrect: Tuple[int, int] hint type-constraint &#39;</span>
                     <span class="s1">&#39;violated. The type of element #0 in the passed tuple&#39;</span>
                     <span class="s1">&#39; is incorrect. Expected an instance of type int, &#39;</span>
                     <span class="s1">&#39;instead received an instance of type str.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="KVHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.KVHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">KVHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="KVHintTestCase.test_getitem_param_must_be_tuple"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.KVHintTestCase.test_getitem_param_must_be_tuple">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_param_must_be_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">KV</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Parameter to KV type-hint must be a tuple of types: &#39;</span>
                     <span class="s1">&#39;KV[.., ..].&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="KVHintTestCase.test_getitem_param_must_have_length_2"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.KVHintTestCase.test_getitem_param_must_have_length_2">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_param_must_have_length_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">KV</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Length of parameters to a KV type-hint must be &quot;</span>
                     <span class="s2">&quot;exactly 2. Passed parameters: (&lt;type &#39;int&#39;&gt;, &lt;type &quot;</span>
                     <span class="s2">&quot;&#39;str&#39;&gt;, &lt;type &#39;bool&#39;&gt;), have a length of 3.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="KVHintTestCase.test_getitem_proxy_to_tuple"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.KVHintTestCase.test_getitem_proxy_to_tuple">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_proxy_to_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">KV</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="o">.</span><span class="n">TupleConstraint</span><span class="p">))</span></div>

<div class="viewcode-block" id="KVHintTestCase.test_enforce_kv_type_constraint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.KVHintTestCase.test_enforce_kv_type_constraint">[docs]</a>  <span class="k">def</span> <span class="nf">test_enforce_kv_type_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">KV</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">t</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="DictHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">DictHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="DictHintTestCase.test_getitem_param_must_be_tuple"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_getitem_param_must_be_tuple">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_param_must_be_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Parameter to Dict type-hint must be a tuple of &#39;</span>
                     <span class="s1">&#39;types: Dict[.., ..].&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_getitem_param_must_have_length_2"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_getitem_param_must_have_length_2">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_param_must_have_length_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Length of parameters to a Dict type-hint must be &quot;</span>
                     <span class="s2">&quot;exactly 2. Passed parameters: (&lt;type &#39;float&#39;&gt;, &lt;type &quot;</span>
                     <span class="s2">&quot;&#39;int&#39;&gt;, &lt;type &#39;bool&#39;&gt;), have a length of 3.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_key_type_must_be_valid_composite_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_key_type_must_be_valid_composite_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_key_type_must_be_valid_composite_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_value_type_must_be_valid_composite_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_value_type_must_be_valid_composite_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_value_type_must_be_valid_composite_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint1</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">hint2</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">hint3</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">hint1</span><span class="p">,</span> <span class="n">hint1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">hint3</span><span class="p">,</span> <span class="n">hint3</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">hint3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">hint2</span><span class="p">,</span> <span class="n">hint1</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint3</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Dict[int, List[Tuple[str, str, str]]]&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">hint3</span><span class="p">))</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_type_checks_not_dict"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_type_checks_not_dict">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_checks_not_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Dict type-constraint violated. All passed instances &#39;</span>
                     <span class="s1">&#39;must be of type dict. [1, 2] is of type list.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_type_check_invalid_key_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_type_check_invalid_key_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_key_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
                         <span class="p">]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">]}</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">((</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">))</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Dict[Tuple[int, int, int], List[str]] hint key-type &#39;</span>
                     <span class="s1">&#39;constraint violated. All keys should be of type &#39;</span>
                     <span class="s1">&#39;Tuple[int, int, int]. Instead: Passed object &#39;</span>
                     <span class="s1">&#39;instance is of the proper type, but differs in &#39;</span>
                     <span class="s1">&#39;length from the hinted type. Expected a tuple of &#39;</span>
                     <span class="s1">&#39;length 3, received a tuple of length 2.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_type_check_invalid_value_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_type_check_invalid_value_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_value_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Dict[str, Dict[int, str]] hint value-type constraint&#39;</span>
                     <span class="s1">&#39; violated. All values should be of type &#39;</span>
                     <span class="s1">&#39;Dict[int, str]. Instead: Dict type-constraint &#39;</span>
                     <span class="s1">&#39;violated. All passed instances must be of type dict.&#39;</span>
                     <span class="s1">&#39; [1, 2, 3] is of type list.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_type_check_valid_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_type_check_valid_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;k&#39;</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_type_check_valid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_type_check_valid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></div>

<div class="viewcode-block" id="DictHintTestCase.test_match_type_variables"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DictHintTestCase.test_match_type_variables">[docs]</a>  <span class="k">def</span> <span class="nf">test_match_type_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">S</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">TypeVariable</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">TypeVariable</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">S</span><span class="p">,</span> <span class="n">T</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">({</span><span class="n">S</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">T</span><span class="p">:</span> <span class="nb">str</span><span class="p">},</span>
                     <span class="n">hint</span><span class="o">.</span><span class="n">match_type_variables</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]))</span></div></div>


<div class="viewcode-block" id="SetHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">SetHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="SetHintTestCase.test_getitem_invalid_composite_type_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_getitem_invalid_composite_type_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_invalid_composite_type_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Parameter to a Set hint must be a non-sequence, a &quot;</span>
                     <span class="s2">&quot;type, or a TypeConstraint. &lt;type &#39;list&#39;&gt; is an &quot;</span>
                     <span class="s2">&quot;instance of type.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint1</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="n">hint2</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">hint1</span><span class="p">,</span> <span class="n">hint1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">hint2</span><span class="p">,</span> <span class="n">hint1</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">bool</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Set[List[bool]]&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_type_check_must_be_set"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_type_check_must_be_set">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_must_be_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Set type-constraint violated. Valid object instance &quot;</span>
                     <span class="s2">&quot;must be of type &#39;set&#39;. Instead, an instance of &#39;int&#39;&quot;</span>
                     <span class="s2">&quot; was received.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_type_check_invalid_elem_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_type_check_invalid_elem_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_invalid_elem_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_type_check_valid_elem_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_type_check_valid_elem_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_elem_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">s</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetHintTestCase.test_type_check_valid_elem_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.SetHintTestCase.test_type_check_valid_elem_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_valid_elem_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">s</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="IterableHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">IterableHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="IterableHintTestCase.test_getitem_invalid_composite_type_param"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_getitem_invalid_composite_type_param">[docs]</a>  <span class="k">def</span> <span class="nf">test_getitem_invalid_composite_type_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Parameter to an Iterable hint must be a &#39;</span>
                     <span class="s1">&#39;non-sequence, a type, or a TypeConstraint. 5 is &#39;</span>
                     <span class="s1">&#39;an instance of int.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]])</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_tuple_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_tuple_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_tuple_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">SuperClass</span><span class="p">],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SubClass</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
                          <span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Iterable[Set[str]]&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_type_check_must_be_iterable"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_type_check_must_be_iterable">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_must_be_iterable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Iterable type-constraint violated. Valid object &quot;</span>
                     <span class="s2">&quot;instance must be of type &#39;iterable&#39;. Instead, an &quot;</span>
                     <span class="s2">&quot;instance of &#39;int&#39; was received.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_type_check_violation_invalid_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_type_check_violation_invalid_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_violation_invalid_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">)</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_type_check_violation_valid_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_type_check_violation_valid_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_violation_valid_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">))</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_type_check_violation_invalid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_type_check_violation_invalid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_violation_invalid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">([[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">]])</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">)</span></div>

<div class="viewcode-block" id="IterableHintTestCase.test_type_check_violation_valid_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.IterableHintTestCase.test_type_check_violation_valid_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_violation_valid_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">type_check</span><span class="p">(</span><span class="n">l</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="TestGeneratorWrapper"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TestGeneratorWrapper">[docs]</a><span class="k">class</span> <span class="nc">TestGeneratorWrapper</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestGeneratorWrapper.test_functions_as_regular_generator"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TestGeneratorWrapper.test_functions_as_regular_generator">[docs]</a>  <span class="k">def</span> <span class="nf">test_functions_as_regular_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">i</span>

    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">interleave_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">wrapped_gen</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">GeneratorWrapper</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">interleave_func</span><span class="p">)</span>

    <span class="c1"># Should function as a normal generator.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">next</span><span class="p">(</span><span class="n">wrapped_gen</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">wrapped_gen</span><span class="p">))</span>

    <span class="c1"># Interleave function should have been called each time.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">l</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="GeneratorHintTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.GeneratorHintTestCase">[docs]</a><span class="k">class</span> <span class="nc">GeneratorHintTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="GeneratorHintTestCase.test_repr"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.GeneratorHintTestCase.test_repr">[docs]</a>  <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hint</span> <span class="o">=</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Iterator[Set[str]]&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">hint</span><span class="p">))</span></div>

<div class="viewcode-block" id="GeneratorHintTestCase.test_compatibility"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.GeneratorHintTestCase.test_compatibility">[docs]</a>  <span class="k">def</span> <span class="nf">test_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertNotCompatible</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span></div>

<div class="viewcode-block" id="GeneratorHintTestCase.test_generator_return_hint_invalid_yield_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.GeneratorHintTestCase.test_generator_return_hint_invalid_yield_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_generator_return_hint_invalid_yield_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">all_upper</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">e</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="nb">next</span><span class="p">(</span><span class="n">all_upper</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;Type-hint for return type violated: Iterator[int] &#39;</span>
                     <span class="s1">&#39;hint type-constraint violated. Expected a iterator &#39;</span>
                     <span class="s1">&#39;of type int. Instead received a iterator of type &#39;</span>
                     <span class="s1">&#39;str.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="GeneratorHintTestCase.test_generator_argument_hint_invalid_yield_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.GeneratorHintTestCase.test_generator_argument_hint_invalid_yield_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_generator_argument_hint_invalid_yield_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrong_yield_gen</span><span class="p">():</span>
      <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="n">e</span>

    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">[</span><span class="n">e</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">a</span><span class="p">]</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">increment</span><span class="p">(</span><span class="n">wrong_yield_gen</span><span class="p">())</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Type-hint for argument: &#39;a&#39; violated: Iterator[int] &quot;</span>
                     <span class="s2">&quot;hint type-constraint violated. Expected a iterator &quot;</span>
                     <span class="s2">&quot;of type int. Instead received a iterator of type &quot;</span>
                     <span class="s2">&quot;str.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TakesDecoratorTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase">[docs]</a><span class="k">class</span> <span class="nc">TakesDecoratorTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_must_be_primitive_type_or_constraint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_must_be_primitive_type_or_constraint">[docs]</a>  <span class="k">def</span> <span class="nf">test_must_be_primitive_type_or_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

      <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;All type hint arguments must be a non-sequence, a &#39;</span>
                     <span class="s1">&#39;type, or a TypeConstraint. [1, 2] is an instance of &#39;</span>
                     <span class="s1">&#39;list.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span>

      <span class="nd">@check_type_hints</span>
      <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;All type hint arguments must be a non-sequence, a type, &#39;</span>
                     <span class="s1">&#39;or a TypeConstraint. 5 is an instance of int.&#39;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_basic_type_assertion"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_basic_type_assertion">[docs]</a>  <span class="k">def</span> <span class="nf">test_basic_type_assertion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">m</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
      <span class="n">foo</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Type-hint for argument: &#39;a&#39; violated. Expected an &quot;</span>
                     <span class="s2">&quot;instance of &lt;type &#39;int&#39;&gt;, instead found an &quot;</span>
                     <span class="s2">&quot;instance of &lt;type &#39;str&#39;&gt;.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_composite_type_assertion"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_composite_type_assertion">[docs]</a>  <span class="k">def</span> <span class="nf">test_composite_type_assertion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">a</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]</span>
      <span class="n">foo</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Type-hint for argument: &#39;a&#39; violated: List[int] hint &quot;</span>
                       <span class="s2">&quot;type-constraint violated. The type of element #0 in &quot;</span>
                       <span class="s2">&quot;the passed list is incorrect. Expected an instance of &quot;</span>
                       <span class="s2">&quot;type int, instead received an instance of type str.&quot;</span><span class="p">,</span>
                       <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_valid_simple_type_arguments"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_valid_simple_type_arguments">[docs]</a>  <span class="k">def</span> <span class="nf">test_valid_simple_type_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">upper</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="c1"># Type constraints should pass, and function will be evaluated as normal.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">upper</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_any_argument_type_hint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_any_argument_type_hint">[docs]</a>  <span class="k">def</span> <span class="nf">test_any_argument_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="mi">4</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_valid_mix_positional_and_keyword_arguments"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_valid_mix_positional_and_keyword_arguments">[docs]</a>  <span class="k">def</span> <span class="nf">test_valid_mix_positional_and_keyword_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">elem</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">elem</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">container</span> <span class="o">+</span> <span class="n">elem</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">combine</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]))</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_invalid_only_positional_arguments"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_invalid_only_positional_arguments">[docs]</a>  <span class="k">def</span> <span class="nf">test_invalid_only_positional_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">sub</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Type-hint for argument: &#39;b&#39; violated. Expected an &quot;</span>
                     <span class="s2">&quot;instance of &lt;type &#39;int&#39;&gt;, instead found an instance &quot;</span>
                     <span class="s2">&quot;of &lt;type &#39;str&#39;&gt;.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="TakesDecoratorTestCase.test_valid_only_positional_arguments"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.TakesDecoratorTestCase.test_valid_only_positional_arguments">[docs]</a>  <span class="k">def</span> <span class="nf">test_valid_only_positional_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="ReturnsDecoratorTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase">[docs]</a><span class="k">class</span> <span class="nc">ReturnsDecoratorTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_no_kwargs_accepted"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_no_kwargs_accepted">[docs]</a>  <span class="k">def</span> <span class="nf">test_no_kwargs_accepted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
      <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">():</span>
        <span class="k">return</span> <span class="mi">5</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_must_be_primitive_type_or_type_constraint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_must_be_primitive_type_or_type_constraint">[docs]</a>  <span class="k">def</span> <span class="nf">test_must_be_primitive_type_or_type_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="nd">@with_output_types</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">():</span>
        <span class="k">pass</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
      <span class="nd">@with_output_types</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">():</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_must_be_single_return_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_must_be_single_return_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_must_be_single_return_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
      <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
      <span class="k">def</span> <span class="nf">unused_foo</span><span class="p">():</span>
        <span class="k">return</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_type_check_violation"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_type_check_violation">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_violation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="s1">&#39;test&#39;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="n">foo</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s2">&quot;Type-hint for return type violated. Expected an &quot;</span>
                     <span class="s2">&quot;instance of &lt;type &#39;int&#39;&gt;, instead found an instance &quot;</span>
                     <span class="s2">&quot;of &lt;type &#39;str&#39;&gt;.&quot;</span><span class="p">,</span>
                     <span class="n">e</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_type_check_simple_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_type_check_simple_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_simple_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">upper</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">,</span> <span class="n">upper</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_type_check_composite_type"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_type_check_composite_type">[docs]</a>  <span class="k">def</span> <span class="nf">test_type_check_composite_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span>
    <span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
      <span class="k">return</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span> <span class="n">bar</span><span class="p">())</span></div>

<div class="viewcode-block" id="ReturnsDecoratorTestCase.test_any_return_type_hint"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.ReturnsDecoratorTestCase.test_any_return_type_hint">[docs]</a>  <span class="k">def</span> <span class="nf">test_any_return_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
      <span class="k">return</span> <span class="s1">&#39;foo&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase">[docs]</a><span class="k">class</span> <span class="nc">CombinedReturnsAndTakesTestCase</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase.test_enable_and_disable_type_checking_takes"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase.test_enable_and_disable_type_checking_takes">[docs]</a>  <span class="k">def</span> <span class="nf">test_enable_and_disable_type_checking_takes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">int_to_str</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="c1"># The function call below violates the argument type-hint above, but won&#39;t</span>
    <span class="c1"># result in an exception since run-time type-checking was disabled above.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">int_to_str</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>

    <span class="c1"># Must re-define since the conditional is in the (maybe)wrapper.</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">int_to_str</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="c1"># With run-time type checking enabled once again the same call-atttempt</span>
    <span class="c1"># should result in a TypeCheckError.</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">int_to_str</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase.test_enable_and_disable_type_checking_returns"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase.test_enable_and_disable_type_checking_returns">[docs]</a>  <span class="k">def</span> <span class="nf">test_enable_and_disable_type_checking_returns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">int_to_str</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span>

    <span class="c1"># The return value of the function above violates the return-type</span>
    <span class="c1"># type-hint above, but won&#39;t result in an exception since run-time</span>
    <span class="c1"># type-checking was disabled above.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">int_to_str</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>

    <span class="c1"># Must re-define since the conditional is in the (maybe)wrapper.</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">int_to_str</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span>

    <span class="c1"># With type-checking enabled once again we should get a TypeCheckError here.</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">int_to_str</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span></div>

<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase.test_valid_mix_pos_and_keyword_with_both_orders"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase.test_valid_mix_pos_and_keyword_with_both_orders">[docs]</a>  <span class="k">def</span> <span class="nf">test_valid_mix_pos_and_keyword_with_both_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">to_upper_with_slice</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">string</span><span class="o">.</span><span class="n">upper</span><span class="p">()[</span><span class="n">start</span><span class="p">:]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;ELLO&#39;</span><span class="p">,</span> <span class="n">to_upper_with_slice</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase.test_simple_takes_and_returns_hints"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase.test_simple_takes_and_returns_hints">[docs]</a>  <span class="k">def</span> <span class="nf">test_simple_takes_and_returns_hints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">to_lower</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="c1"># Return type and argument type satisfied, should work as normal.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="n">to_lower</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">))</span>

    <span class="c1"># Invalid argument type should raise a TypeCheckError</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">to_lower</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">to_lower</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="k">return</span> <span class="mi">9</span>

    <span class="c1"># Modified function now has an invalid return type.</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">to_lower</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CombinedReturnsAndTakesTestCase.test_composite_takes_and_returns_hints"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.CombinedReturnsAndTakesTestCase.test_composite_takes_and_returns_hints">[docs]</a>  <span class="k">def</span> <span class="nf">test_composite_takes_and_returns_hints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">it</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span>
    <span class="k">def</span> <span class="nf">expand_ints</span><span class="p">(</span><span class="n">it</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">]</span>

    <span class="c1"># Return type and argument type satisfied, should work as normal.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="n">expand_ints</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))))</span>

    <span class="c1"># Invalid argument, list of str instead of int.</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">expand_ints</span><span class="p">(</span><span class="s1">&#39;t e s t&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

    <span class="nd">@check_type_hints</span>
    <span class="nd">@with_output_types</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span>
    <span class="nd">@with_input_types</span><span class="p">(</span><span class="n">it</span><span class="o">=</span><span class="n">typehints</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">expand_ints</span><span class="p">(</span><span class="n">it</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">]</span>

    <span class="c1"># Modified function now has invalid return type.</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TypeCheckError</span><span class="p">):</span>
      <span class="n">expand_ints</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span></div></div>


<div class="viewcode-block" id="DecoratorHelpers"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DecoratorHelpers">[docs]</a><span class="k">class</span> <span class="nc">DecoratorHelpers</span><span class="p">(</span><span class="n">TypeHintTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="DecoratorHelpers.test_hint_helper"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DecoratorHelpers.test_hint_helper">[docs]</a>  <span class="k">def</span> <span class="nf">test_hint_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="n">Any</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">is_consistent_with</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">str</span><span class="p">))</span></div>

<div class="viewcode-block" id="DecoratorHelpers.test_positional_arg_hints"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DecoratorHelpers.test_positional_arg_hints">[docs]</a>  <span class="k">def</span> <span class="nf">test_positional_arg_hints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">_positional_arg_hints</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="p">{}))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">_positional_arg_hints</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">}))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">typehints</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typehints</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
                      <span class="n">_positional_arg_hints</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">}))</span></div>

<div class="viewcode-block" id="DecoratorHelpers.test_getcallargs_forhints"><a class="viewcode-back" href="../../../apache_beam.typehints.html#apache_beam.typehints.typehints_test.DecoratorHelpers.test_getcallargs_forhints">[docs]</a>  <span class="k">def</span> <span class="nf">test_getcallargs_forhints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="o">*</span><span class="n">d</span><span class="p">:</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]},</span>
        <span class="n">getcallargs_forhints</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]},</span>
        <span class="n">getcallargs_forhints</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="nb">int</span><span class="p">]))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]},</span>
        <span class="n">getcallargs_forhints</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]))</span></div></div>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Apache Beam  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>