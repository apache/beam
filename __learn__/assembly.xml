<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  Please refere to https://github.com/apache/maven-resources/blob/trunk/apache-source-release-assembly-descriptor/src/main/resources/assemblies/source-shared.xml before making changes to this file, thanks! 
  -->
<assemblies
  xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd">

  <id>source</id>

  <formats>
    <format>zip</format>
  </formats>

  <fileSets>
    <!-- main project dir layout -->
    <fileSet>
      <directory>.</directory>
      <outputDirectory></outputDirectory>
      <useDefaultExcludes>true</useDefaultExcludes>
      <excludes>
        <!-- build output -->
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/).*${project.build.directory}.*]</exclude>
        <!--
          NOTE: The following excludes are to take care of situations where the release plugin is customised to run extra goals/generate project website - good to be safe, just in case
        -->
        <!-- IDEs -->
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?maven-eclipse\.xml]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.project]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.classpath]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?[^/]*\.iws]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.idea(/.*)?]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?out(/.*)?]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?[^/]*\.ipr]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?[^/]*\.iml]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.settings(/.*)?]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.externalToolBuilders(/.*)?]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.deployables(/.*)?]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?\.wtpmodules(/.*)?]</exclude>
        <!-- misc -->
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?cobertura\.ser]</exclude>
        <!-- Gradle build process artifacts -->
        <exclude>**/.gradle/**</exclude>
        <exclude>**/.gogradle/**</exclude>
        <exclude>**/build/**</exclude>
        <exclude>**/out/**</exclude>
        <exclude>**/.gradletasknamecache</exclude>
        <!-- Maven build artifacts -->
        <exclude>**/bin/**</exclude>
        <exclude>**/dependency-reduced-pom.xml</exclude>
        <!-- Maven archetypes support -->
        <exclude>sdks/java/maven-archetypes/examples/src/main/resources/archetype-resources/src/</exclude>
        <exclude>sdks/java/maven-archetypes/examples-java8/src/main/resources/archetype-resources/src/</exclude>

        <!-- Python build artifacts -->
        <exclude>**/*.py[cod]</exclude>
        <exclude>**/*.egg-info/</exclude>
        <exclude>**/.egges/**</exclude>
        <exclude>**/nose-*.egg/**</exclude>
        <exclude>**/.tox/**</exclude>
        <exclude>**/dist/**</exclude>
        <exclude>**/env/**</exclude>
        <exclude>sdks/python/**/*.c</exclude>
        <exclude>sdks/python/**/*.so</exclude>
        <exclude>sdks/python/**/*.eggs</exclude>
        <exclude>sdks/python/LICENSE</exclude>
        <exclude>sdks/python/NOTICE</exclude>
        <exclude>sdks/python/README.md</exclude>
        <exclude>sdks/python/apache_beam/portability/api/*pb2*.*</exclude>
        <!-- release-plugin artifacts (temp) -->
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?pom\.xml\.releaseBackup]</exclude>
        <exclude>%regex[(?!((?!${project.build.directory}/)[^/]+/)*src/)(.*/)?release\.properties]</exclude>
      </excludes>
    </fileSet>
  </fileSets>
</assemblies>